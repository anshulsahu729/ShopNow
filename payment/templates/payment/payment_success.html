<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Successful</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pop {
      0% { transform: scale(0.5); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600 overflow-hidden">
  <!-- Confetti Canvas -->
  <canvas id="confetti" class="absolute top-0 left-0 w-full h-full pointer-events-none"></canvas>

  <div class="relative z-10 bg-white/20 backdrop-blur-lg p-10 rounded-3xl shadow-2xl w-full max-w-lg text-center border border-white/30 animate-[pop_0.6s_ease-out]">
    
    <!-- Success Icon -->
    <div class="mx-auto mb-6 flex items-center justify-center w-20 h-20 rounded-full bg-green-500 text-white text-4xl shadow-lg animate-bounce">
      âœ“
    </div>
    
    <h2 class="text-3xl font-bold text-white mb-6">Payment Successful ðŸŽ‰</h2>

    <div class="bg-white/70 rounded-xl p-6 text-gray-800 space-y-2 shadow-inner">
      <p><strong>Name:</strong> {{ order.name }}</p>
      <p><strong>Email:</strong> {{ order.email }}</p>
      <p><strong>Product:</strong> {{ order.product_name }}</p>
      <p><strong>Amount:</strong> â‚¹{{ order.amount }}</p>
      <p><strong>Payment Method:</strong> {{ order.get_payment_method_display }}</p>
      <p class="text-sm text-gray-600 mt-3">Your order will be delivered on <strong>{{ order.delivery_date|date:"d M Y" }}</strong></p>
    </div>

    <a href="{% url 'payment:checkout_form' %}" 
      class="mt-6 inline-block bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-8 rounded-xl shadow-md font-semibold tracking-wide transition transform hover:scale-105 hover:shadow-lg">
      Place Another Order
    </a>
  </div>

  <!-- Confetti JS -->
  <script>
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const confetti = [];
    for (let i=0;i<150;i++){
      confetti.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:Math.random()*6+4,
        d:Math.random()*150+50,
        color:`hsl(${Math.random()*360},100%,50%)`,
        tilt:Math.floor(Math.random()*10)-10
      });
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      confetti.forEach(f=>{
        ctx.beginPath();
        ctx.lineWidth=f.r/2;
        ctx.strokeStyle=f.color;
        ctx.moveTo(f.x+f.tilt+f.r/2,f.y);
        ctx.lineTo(f.x+f.tilt,f.y+f.r);
        ctx.stroke();
      });
      update();
      requestAnimationFrame(draw);
    }

    function update(){
      confetti.forEach(f=>{
        f.y += 2;
        f.x += Math.sin(f.d)*0.5;
        if(f.y>canvas.height){ f.y=0; f.x=Math.random()*canvas.width; }
      });
    }

    draw();
    window.addEventListener('resize',()=>{
      canvas.width=window.innerWidth;
      canvas.height=window.innerHeight;
    });
  </script>
</body>
</html>
