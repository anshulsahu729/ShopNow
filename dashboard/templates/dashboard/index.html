<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopNow — Dashboard (Single File Demo)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#0b72ff;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f5f7fb;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      --shadow: 0 6px 18px rgba(12,20,40,0.08);
      --max-width:1200px;
      --success: #16a34a;
    }
    *{box-sizing:border-box}
    html,body{height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:#0f172a;margin:0;background:linear-gradient(180deg,var(--bg),#eef3fb);}
    .container{max-width:var(--max-width);margin:28px auto;padding:20px}

    /* Header */
    header{display:flex;gap:16px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);display:flex;align-items:center;justify-content:center;color:white;font-weight:800;box-shadow:var(--shadow)}
    .brand h1{margin:0;font-size:1.15rem}
    .search{flex:1;margin:0 18px;display:flex}
    .search input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e6eef9;background:white;outline:none}
    .top-actions{display:flex;gap:12px;align-items:center}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:9px;border:none;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(11,114,255,0.15)}
    .icon-btn{background:transparent;border:1px solid #e8eefc;padding:9px;border-radius:10px;cursor:pointer}

    /* layout */
    .grid{display:grid;grid-template-columns:280px 1fr;gap:18px;margin-top:20px}
    aside{background:var(--card);padding:16px;border-radius:var(--radius);box-shadow:var(--shadow)}
    main{min-height:70vh}

    /* Sidebar */
    .category{display:flex;flex-direction:column;gap:8px}
    .category button{background:transparent;border:none;text-align:left;padding:8px;border-radius:8px;cursor:pointer;color:var(--muted)}
    .category button.active{background:linear-gradient(90deg,#eef6ff,#f7fbff);color:var(--accent);font-weight:600}
    .price-range{display:flex;gap:8px;margin-top:12px}
    .chip{display:inline-block;padding:8px 10px;border-radius:999px;border:1px solid #eef5ff;font-weight:600;color:var(--muted);cursor:pointer}

    /* cards */
    .toolbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px}
    .media{height:160px;border-radius:10px;background:linear-gradient(180deg,#f7f9ff,#fff);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .media img{max-width:100%;max-height:100%;object-fit:contain}
    .title{font-weight:700;margin:0}
    .price{font-weight:800;color:var(--accent)}
    .meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:0.9rem}
    .product-actions{display:flex;gap:8px}

    /* cart */
    .cart-modal{position:fixed;right:20px;bottom:20px;background:linear-gradient(180deg,#fff,#f7fbff);border-radius:14px;padding:12px;box-shadow:0 12px 40px rgba(2,6,23,0.12);width:360px;max-height:70vh;overflow:auto}
    .cart-empty{text-align:center;color:var(--muted);padding:30px}
    .cart-item{display:flex;gap:8px;align-items:center;border-radius:10px;padding:8px}
    .cart-item img{width:58px;height:58px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .checkout{display:flex;justify-content:space-between;align-items:center;padding-top:12px}

    /* product detail modal */
    .overlay{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:flex;align-items:center;justify-content:center}
    .modal{width:min(900px,96%);background:white;padding:18px;border-radius:14px}
    .modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}

    /* responsive */
    @media (max-width:880px){.grid{grid-template-columns:1fr;}.brand h1{display:none}.search{order:3;margin-top:12px}.cart-modal{right:12px;left:12px;width:auto}}

    footer{margin-top:28px;text-align:center;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">SN</div>
        <div>
          <h1>ShopNow Dashboard</h1>
          <div style="font-size:12px;color:var(--muted)">Single-file demo • Interactive product dashboard</div>
        </div>
      </div>

      <div class="search">
        <input id="searchInput" placeholder="Search products, e.g. 'sneakers' or 'iphone'" />
      </div>

      <div class="top-actions">
        <button class="icon-btn" id="toggleGrid">Toggle View</button>
        <button class="btn ghost" id="viewOrders">Orders</button>
        <button class="btn" id="openCart">Cart (<span id="cartCount">0</span>)</button>
      </div>
    </header>

    <div class="grid">
      <aside>
        <h3 style="margin:0 0 8px 0">Categories</h3>
        <div class="category" id="categories"></div>

        <h4 style="margin-top:14px;margin-bottom:8px">Top Brands</h4>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <div class="chip">Acme</div>
          <div class="chip">Nexpo</div>
          <div class="chip">Orion</div>
          <div class="chip">Aros</div>
        </div>

        <h4 style="margin-top:14px;margin-bottom:8px">Quick Filters</h4>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <div class="chip" data-filter="new">New</div>
          <div class="chip" data-filter="sale">On Sale</div>
          <div class="chip" data-filter="trending">Trending</div>
        </div>

        <div style="margin-top:16px;color:var(--muted)">
          <strong>Tip:</strong> Click a product image to view details. Add to cart to simulate checkout.
        </div>
      </aside>

      <main>
        <div class="toolbar">
          <div style="display:flex;gap:10px;align-items:center">
            <select id="sort" style="padding:9px;border-radius:8px;border:1px solid #e6eef9">
              <option value="default">Sort: Popular</option>
              <option value="price-asc">Price: Low to High</option>
              <option value="price-desc">Price: High to Low</option>
              <option value="newest">Newest</option>
            </select>
            <div style="font-size:14px;color:var(--muted)"><span id="shownCount">0</span> products</div>
          </div>

          <div style="display:flex;gap:8px;align-items:center">
            <label style="font-size:13px;color:var(--muted)">View:</label>
            <button class="chip" id="listView">List</button>
            <button class="chip" id="gridView">Grid</button>
          </div>
        </div>

        <section class="products" id="productGrid"></section>
      </main>
    </div>

    <footer>
      <small>© ShopNow • Demo dashboard • Not a production store</small>
    </footer>
  </div>

  <!-- Cart Modal (hidden by default) -->
  <div id="cartModal" class="cart-modal" style="display:none">
    <h4 style="margin:8px 0">Your Cart</h4>
    <div id="cartItems"></div>
    <div class="checkout">
      <div style="font-weight:700">Total: ₹<span id="cartTotal">0</span></div>
      <div>
        <button class="btn" id="checkoutBtn">Checkout</button>
      </div>
    </div>
  </div>

  <!-- Product detail overlay -->
  <div id="overlay" style="display:none" class="overlay">
    <div class="modal" role="dialog" aria-modal="true">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong id="detailTitle">Product</strong>
        <button id="closeDetail" class="icon-btn">Close</button>
      </div>
      <div class="modal-grid">
        <div style="display:flex;align-items:center;justify-content:center;padding:8px;background:linear-gradient(180deg,#fbfdff,#fff);border-radius:10px">
          <img id="detailImage" src="" alt="" style="max-width:100%;max-height:420px;object-fit:contain">
        </div>
        <div>
          <h3 id="detailName" style="margin-top:4px;margin-bottom:6px"></h3>
          <div class="price" id="detailPrice" style="font-size:1.4rem;margin-bottom:8px"></div>
          <div style="color:var(--muted);margin-bottom:12px" id="detailDesc"></div>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
            <label>Quantity</label>
            <input id="detailQty" type="number" min="1" value="1" style="width:72px;padding:8px;border-radius:8px;border:1px solid #eef5ff">
          </div>
          <div style="display:flex;gap:8px">
            <button class="btn" id="addToCartDetail">Add to Cart</button>
            <button class="btn ghost" id="buyNow">Buy Now</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* Sample product dataset — in a real app this comes from a backend */
    const PRODUCTS = [
      {id:1,title:'Men\'s Running Sneakers',category:'Men',price:3599,brand:'Nexpo',img:'https://picsum.photos/id/21/600/400',desc:'Lightweight breathbable running sneakers.'},
      {id:2,title:'Women\'s Casual Shirt',category:'Women',price:1299,brand:'Acme',img:'https://picsum.photos/id/1011/600/400',desc:'Comfort-fit casual shirt for daily wear.'},
      {id:3,title:'Wireless Earbuds',category:'Electronics',price:2499,brand:'Orion',img:'https://picsum.photos/id/180/600/400',desc:'Noise-cancelling true wireless earbuds.'},
      {id:4,title:'Smartphone 128GB',category:'Electronics',price:19999,brand:'Aros',img:'https://picsum.photos/id/1060/600/400',desc:'Flagship performance, crisp display.'},
      {id:5,title:'Women\'s Denim Jacket',category:'Women',price:2599,brand:'Nexpo',img:'https://picsum.photos/id/1025/600/400',desc:'Classic denim jacket with modern fit.'},
      {id:6,title:'Formal Men\'s Watch',category:'Men',price:7999,brand:'Acme',img:'https://picsum.photos/id/1040/600/400',desc:'Leather strap, minimalist dial design.'},
      {id:7,title:'4K LED TV 43"',category:'Electronics',price:27999,brand:'Orion',img:'https://picsum.photos/id/1068/600/400',desc:'Cinematic display with HDR support.'},
      {id:8,title:'Kids T-shirt',category:'Kids',price:499,brand:'Tiny',img:'https://picsum.photos/id/1020/600/400',desc:'Soft cotton tee for kids.'},
      {id:9,title:'Women\'s Handbag',category:'Women',price:3999,brand:'Aros',img:'https://picsum.photos/id/1027/600/400',desc:'Stylish everyday handbag.'},
      {id:10,title:'Gaming Headset',category:'Electronics',price:3999,brand:'Nexpo',img:'https://picsum.photos/id/1070/600/400',desc:'Surround sound for immersive gaming.'}
    ];

    // state
    let state = {
      products: PRODUCTS.slice(),
      filtered: PRODUCTS.slice(),
      view: 'grid',
      cart: {},
      category: 'All'
    };

    // elements
    const productGrid = document.getElementById('productGrid');
    const shownCount = document.getElementById('shownCount');
    const cartCount = document.getElementById('cartCount');
    const cartModal = document.getElementById('cartModal');
    const cartItems = document.getElementById('cartItems');
    const cartTotal = document.getElementById('cartTotal');
    const openCartBtn = document.getElementById('openCart');
    const searchInput = document.getElementById('searchInput');
    const categoriesEl = document.getElementById('categories');
    const overlay = document.getElementById('overlay');

    // init
    function init(){
      renderCategories();
      renderProducts(state.filtered);
      bindEvents();
      loadCart();
    }

    function renderCategories(){
      const cats = ['All',...new Set(PRODUCTS.map(p=>p.category))];
      categoriesEl.innerHTML = '';
      cats.forEach(c=>{
        const btn = document.createElement('button');
        btn.textContent = c;
        btn.className = c===state.category? 'active':'')
      });
    }

    // Fixing renderCategories with correct creation
    function renderCategories(){
      const cats = ['All',...new Set(PRODUCTS.map(p=>p.category))];
      categoriesEl.innerHTML = '';
      cats.forEach(c=>{
        const btn = document.createElement('button');
        btn.textContent = c;
        btn.onclick = ()=>{ state.category = c; applyFilters(); updateCategoryActive(); }
        btn.className = c===state.category? 'active':'';
        categoriesEl.appendChild(btn);
      });
    }

    function updateCategoryActive(){
      Array.from(categoriesEl.children).forEach(b=>{ b.classList.toggle('active', b.textContent===state.category); });
    }

    function bindEvents(){
      document.getElementById('sort').addEventListener('change', ()=>{ applyFilters(); });
      document.getElementById('gridView').addEventListener('click', ()=>{ state.view='grid'; renderProducts(state.filtered); });
      document.getElementById('listView').addEventListener('click', ()=>{ state.view='list'; renderProducts(state.filtered); });
      document.getElementById('openCart').addEventListener('click', toggleCart);
      document.getElementById('checkoutBtn').addEventListener('click', checkout);
      document.getElementById('toggleGrid').addEventListener('click', ()=>{ document.body.classList.toggle('alt'); alert('Toggle view — demo'); });

      searchInput.addEventListener('input', ()=>{ applyFilters(); });

      document.addEventListener('click', (e)=>{
        if(e.target.matches('.add-to-cart') || e.target.closest('.add-to-cart')){
          const id = Number(e.target.dataset.id || e.target.closest('.add-to-cart').dataset.id);
          addToCart(id,1);
        }
        if(e.target.matches('.product-card') || e.target.closest('.product-card')){
          const el = e.target.closest('.product-card');
          if(el && !e.target.classList.contains('add-to-cart')){
            showDetail(Number(el.dataset.id));
          }
        }
      });

      document.getElementById('closeDetail').addEventListener('click', ()=>overlay.style.display='none');
      document.getElementById('addToCartDetail').addEventListener('click', ()=>{
        const id = Number(document.getElementById('addToCartDetail').dataset.id);
        const qty = Number(document.getElementById('detailQty').value)||1;
        addToCart(id,qty);
        overlay.style.display='none';
      });

      document.getElementById('buyNow').addEventListener('click', ()=>{
        alert('Simulated buy now — would redirect to payment in a real app.');
      });
    }

    function applyFilters(){
      const q = searchInput.value.trim().toLowerCase();
      let list = PRODUCTS.filter(p=> (state.category==='All' || p.category===state.category) && (p.title.toLowerCase().includes(q) || p.desc?.toLowerCase().includes(q) || p.brand?.toLowerCase().includes(q)) );
      const sort = document.getElementById('sort').value;
      if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
      if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
      if(sort==='newest') list = list.reverse();
      state.filtered = list;
      renderProducts(list);
    }

    function renderProducts(list){
      productGrid.innerHTML = '';
      shownCount.textContent = list.length;
      list.forEach(p=>{
        const card = document.createElement('div');
        card.className = 'card product-card';
        card.dataset.id = p.id;
        card.innerHTML = `
          <div class="media"><img src="${p.img}" alt="${escapeHTML(p.title)}"></div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <h4 class="title">${escapeHTML(p.title)}</h4>
              <div class="price">₹${p.price.toLocaleString()}</div>
            </div>
            <div class="meta"><div>${escapeHTML(p.brand)}</div><div>${escapeHTML(p.category)}</div></div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div style="color:var(--muted);font-size:0.9rem">${escapeHTML(p.desc)}</div>
              <div class="product-actions"><button data-id="${p.id}" class="add-to-cart btn">Add</button></div>
            </div>
          </div>
        `;
        productGrid.appendChild(card);
      });

      // list view styling
      if(state.view==='list') productGrid.style.gridTemplateColumns = '1fr'; else productGrid.style.gridTemplateColumns = '';
    }

    function escapeHTML(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    // CART
    function loadCart(){
      try{ const raw = localStorage.getItem('demo_cart'); state.cart = raw ? JSON.parse(raw) : {}; }catch(e){ state.cart = {}; }
      renderCart();
    }
    function saveCart(){ localStorage.setItem('demo_cart', JSON.stringify(state.cart)); renderCart(); }
    function addToCart(id,qty=1){ state.cart[id] = (state.cart[id]||0) + qty; saveCart(); flashAdded(); }
    function updateQty(id,qty){ if(qty<=0) delete state.cart[id]; else state.cart[id]=qty; saveCart(); }
    function removeFromCart(id){ delete state.cart[id]; saveCart(); }

    function renderCart(){
      const ids = Object.keys(state.cart).map(Number);
      cartCount.textContent = ids.reduce((s,i)=>s+state.cart[i],0);
      cartItems.innerHTML = '';
      if(ids.length===0){ cartItems.innerHTML = '<div class="cart-empty">Your cart is empty</div>'; cartTotal.textContent='0'; return }

      let total=0;
      ids.forEach(id=>{
        const p = PRODUCTS.find(x=>x.id===id);
        const qty = state.cart[id];
        total += p.price * qty;
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img src="${p.img}" alt="${escapeHTML(p.title)}">
          <div style="flex:1">
            <div style="font-weight:700">${escapeHTML(p.title)}</div>
            <div style="color:var(--muted);font-size:13px">₹${p.price.toLocaleString()} • ${p.brand}</div>
            <div style="margin-top:6px;display:flex;gap:8px;align-items:center">
              <div class="qty">
                <button class="icon-btn" data-act="dec" data-id="${id}">-</button>
                <div style="padding:6px 10px;border-radius:8px;border:1px solid #eef5ff">${qty}</div>
                <button class="icon-btn" data-act="inc" data-id="${id}">+</button>
              </div>
              <button class="icon-btn" data-act="remove" data-id="${id}">Remove</button>
            </div>
          </div>
        `;
        cartItems.appendChild(row);
      });
      cartTotal.textContent = total.toLocaleString();

      // cart item buttons
      cartItems.querySelectorAll('[data-act]').forEach(b=>{
        b.addEventListener('click', ()=>{
          const id = Number(b.dataset.id); const act = b.dataset.act;
          if(act==='inc') updateQty(id, state.cart[id]+1);
          if(act==='dec') updateQty(id, state.cart[id]-1);
          if(act==='remove') removeFromCart(id);
        });
      });
    }

    function toggleCart(){ cartModal.style.display = cartModal.style.display==='none'?'block':'none'; }

    function checkout(){
      if(Object.keys(state.cart).length===0){ alert('Your cart is empty'); return }
      alert('Simulated checkout — thank you!');
      state.cart = {}; saveCart(); cartModal.style.display='none';
    }

    function flashAdded(){
      const el = document.createElement('div');
      el.textContent = 'Added to cart';
      Object.assign(el.style,{position:'fixed',right:'20px',bottom:'110px',background:'var(--success)',color:'white',padding:'8px 12px',borderRadius:'10px',boxShadow: '0 8px 24px rgba(2,6,23,0.12)'});
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),1200);
    }

    // Product detail view
    function showDetail(id){
      const p = PRODUCTS.find(x=>x.id===id);
      if(!p) return;
      document.getElementById('detailImage').src = p.img;
      document.getElementById('detailName').textContent = p.title;
      document.getElementById('detailPrice').textContent = '₹' + p.price.toLocaleString();
      document.getElementById('detailDesc').textContent = p.desc;
      document.getElementById('addToCartDetail').dataset.id = p.id;
      overlay.style.display = 'flex';
    }

    // small polish
    window.addEventListener('load', init);
  </script>
</body>
</html>

