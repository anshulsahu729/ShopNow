{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid p-0">

  <!-- Hero Section with Carousel -->
  <div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{% static 'images/banner1.jpg' %}" class="d-block w-100" alt="Banner 1">
        <div class="carousel-caption d-none d-md-block">
          <h2 class="fw-bold text-shadow">Shop the Latest Trends üëó</h2>
          <p>Discover fashion, electronics & more with amazing deals!</p>
          <a href="#" class="btn btn-lg btn-primary shadow">Shop Now</a>
        </div>
      </div>
      <div class="carousel-item">
        <img src="{% static 'images/banner2.jpg' %}" class="d-block w-100" alt="Banner 2">
        <div class="carousel-caption d-none d-md-block">
          <h2 class="fw-bold text-shadow">Electronics Sale ‚ö°</h2>
          <p>Up to 50% off on gadgets and accessories!</p>
          <a href="#" class="btn btn-lg btn-warning shadow">Explore</a>
        </div>
      </div>
      <div class="carousel-item">
  <img src="{% static 'images/banner3.jpg' %}" class="d-block w-100" alt="Banner 3">
  <div class="carousel-caption d-none d-md-block">
    <h2 class="fw-bold text-shadow">Fashion Trends üëó</h2>
    <p>Stay stylish with the latest arrivals in clothing and accessories.</p>
    <a href="#" class="btn btn-lg btn-primary shadow">Shop Now</a>
  </div>
</div>

<div class="carousel-item">
  <img src="{% static 'images/banner4.jpg' %}" class="d-block w-100" alt="Banner 4">
  <div class="carousel-caption d-none d-md-block">
    <h2 class="fw-bold text-shadow">Home & Lifestyle üè°</h2>
    <p>Upgrade your living space with our premium collection.</p>
    <a href="#" class="btn btn-lg btn-success shadow">Discover</a>
  </div>
</div>

    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <!-- Search Bar -->
  <div class="container my-4">
    <div class="input-group shadow-sm">
      <input id="searchInput" type="text" class="form-control" placeholder="Search for products üîç...">
      <button class="btn btn-dark">Search</button>
    </div>
  </div>

  <!-- Featured Categories -->
  <div class="container py-5">
    <h2 class="text-center fw-bold mb-4">Shop by Categories üõçÔ∏è</h2>
    <div class="row text-center">
      <div class="col-md-3">
        <div class="card shadow-lg border-0">
          <div class="card-body">
            <i class="bi bi-phone display-4 text-primary"></i>
            <h5 class="card-title mt-2">Electronics</h5>
            <a href="#" class="stretched-link"></a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-lg border-0">
          <div class="card-body">
            <i class="bi bi-bag-heart display-4 text-danger"></i>
            <h5 class="card-title mt-2">Fashion</h5>
            <a href="#" class="stretched-link"></a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-lg border-0">
          <div class="card-body">
            <i class="bi bi-house-door display-4 text-success"></i>
            <h5 class="card-title mt-2">Home & Living</h5>
            <a href="#" class="stretched-link"></a>
          </div>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow-lg border-0">
          <div class="card-body">
            <i class="bi bi-controller display-4 text-warning"></i>
            <h5 class="card-title mt-2">Gaming</h5>
            <a href="#" class="stretched-link"></a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Section -->
  <div class="container py-5">
    <h2 class="text-center fw-bold mb-4">Featured Products ‚≠ê</h2>
    <div class="row" id="productList">
     {% for category, products in category_products.items %}
  <div class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="fw-bold text-primary">{{ category.name }}</h3>
      <a href="{#}" class="btn btn-outline-dark btn-sm rounded-pill">
        View All ‚Üí
      </a>
    </div>

    <div class="row g-4">
      {% for product in products %}
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0 product-card">
          <div class="position-relative">
            <img src="{{ product.image.url }}" class="card-img-top rounded" alt="{{ product.name }}">
            <span class="badge bg-danger position-absolute top-0 start-0 m-2 px-3 py-2">New</span>
          </div>
          <div class="card-body text-center">
            <h5 class="card-title fw-bold">{{ product.name }}</h5>
            <p class="text-muted small mb-2">‚Çπ{{ product.price }}</p>
            <div class="d-flex justify-content-center gap-2">
              <a href="{#}" class="btn btn-sm btn-primary rounded-pill">
                <i class="bi bi-cart-plus"></i> Add
              </a>
              <button class="btn btn-sm btn-outline-dark rounded-pill" data-bs-toggle="modal" data-bs-target="#quickView{{ product.id }}">
                <i class="bi bi-eye"></i> View
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick View Modal -->
      <div class="modal fade" id="quickView{{ product.id }}" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content rounded-3 shadow-lg">
            <div class="modal-body row p-4">
              <div class="col-md-6">
                <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
              </div>
              <div class="col-md-6">
                <h4 class="fw-bold">{{ product.name }}</h4>
                <p class="text-muted">Price: ‚Çπ{{ product.price }}</p>
                <p class="small">{{ product.description|truncatewords:25 }}</p>
                <a href="{#}" class="btn btn-primary rounded-pill">
                  <i class="bi bi-cart-check"></i> Add to Cart
                </a>
                <button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <hr>
  {% endfor %}
    </div>
  </div>

</div>

<!-- Newsletter Signup -->
<div class="container mb-5">
  <div class="position-relative overflow-hidden rounded-4 shadow-lg" style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); padding: 4rem 2rem;">
    <div class="text-center text-white">
      <h3 class="fw-bold mb-3 animate__animated animate__fadeInDown">üìß Join Our Newsletter</h3>
      <p class="mb-4 animate__animated animate__fadeInUp animate__delay-1s">Stay updated with the latest products, offers, and exclusive deals.</p>

      <!-- Display messages -->
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show mx-auto" style="max-width: 500px;" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}

      <form method="post" class="row justify-content-center animate__animated animate__fadeInUp animate__delay-2s">
        {% csrf_token %}
        <div class="col-md-6 col-sm-8 d-flex gap-2">
          <input type="email" name="email" class="form-control rounded-pill px-4 py-2" placeholder="Enter your email" required>
          <button type="submit" class="btn btn-dark rounded-pill px-4 py-2 shadow-sm">
            <i class="bi bi-envelope-fill me-1"></i> Subscribe
          </button>
        </div>
      </form>
      <small class="d-block mt-3 opacity-75">We respect your privacy. Unsubscribe anytime.</small>
    </div>

    <!-- Decorative circles -->
    <div class="position-absolute top-0 start-0 bg-white opacity-10 rounded-circle" style="width:100px; height:100px; transform: translate(-50%, -50%);"></div>
    <div class="position-absolute bottom-0 end-0 bg-white opacity-10 rounded-circle" style="width:150px; height:150px; transform: translate(50%, 50%);"></div>
  </div>
</div>


<!-- Scroll to Top Button -->
<button id="scrollTopBtn" class="btn btn-dark rounded-circle shadow" style="position: fixed; bottom: 20px; right: 20px; display: none;">
  ‚¨ÜÔ∏è
</button>

{% endblock %}

{% block extra_js %}
<script>
// Auto carousel
document.addEventListener("DOMContentLoaded", function () {
  let carousel = document.querySelector('#heroCarousel');
  let carouselInstance = new bootstrap.Carousel(carousel, { interval: 3000, ride: "carousel" });
});

// Search filter function
document.getElementById("searchInput").addEventListener("keyup", function () {
  let filter = this.value.toLowerCase();
  let items = document.querySelectorAll(".product-card");
  items.forEach(card => {
    let title = card.querySelector(".card-title").innerText.toLowerCase();
    card.style.display = title.includes(filter) ? "" : "none";
  });
});

// Scroll to top button
let scrollTopBtn = document.getElementById("scrollTopBtn");
window.onscroll = function () {
  scrollTopBtn.style.display = (document.documentElement.scrollTop > 200) ? "block" : "none";
};
scrollTopBtn.onclick = function () {
  window.scrollTo({ top: 0, behavior: 'smooth' });
};
</script>
{% endblock %}
