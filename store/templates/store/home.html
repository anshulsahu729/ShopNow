{% extends "base.html" %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Welcome Section -->
    <div class="text-center mb-5">
        <h1 class="fw-bold display-5">‚ú® Welcome to Our Store ‚ú®</h1>
        <p class="lead text-muted">Discover amazing products, read our latest blogs, and never miss an update by joining our newsletter.</p>
    </div>

    <!-- Products Preview -->
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="fw-semibold">üõç Featured Products</h2>
            <a href="{% url 'store:product_list' %}" class="btn btn-outline-primary btn-sm">View All</a>
        </div>
        <div class="row g-4">
            {% for product in products %}
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-lg rounded-3">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" class="card-img-top rounded-top" alt="{{ product.name }}" style="height:220px; object-fit:cover;">
                    {% else %}
                    <img src="{% static 'images/default-product.png' %}" class="card-img-top rounded-top" alt="No image" style="height:220px; object-fit:cover;">
                    {% endif %}
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text text-muted">{{ product.description|truncatechars:80 }}</p>
                        <p class="fw-bold text-success mb-2">‚Çπ{{ product.price }}</p>
                        <a href="{% url 'store:product_detail' product.pk %}" class="btn btn-primary mt-auto">View Details</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>No products available yet.</p>
            {% endfor %}
        </div>
    </section>

    <!-- Blogs Preview -->
    <section class="mb-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="fw-semibold">üìù Latest Blogs</h2>
            <a href="{% url 'blog:blog_list' %}" class="btn btn-outline-primary btn-sm">View All</a>
        </div>
        <div class="row g-4">
            {% for blog in blogs %}
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-lg rounded-3">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ blog.title }}</h5>
                        <p class="card-text text-muted">{{ blog.content|truncatechars:120 }}</p>
                        <p><small class="text-muted">üìÖ {{ blog.created_at|date:"M d, Y" }}</small></p>
                        <a href="{% url 'store:blog_detail' blog.pk %}" class="btn btn-outline-secondary mt-auto">Read More</a>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>No blogs published yet.</p>
            {% endfor %}
        </div>
    </section>  

    <!-- Newsletter Signup -->
    <section class="mb-5 p-4 bg-light rounded shadow-sm">
        <h2 class="fw-semibold mb-3">üì¨ Subscribe to our Newsletter</h2>
        <form method="post" action="{% url 'newsletter:newsletter_signup' %}" class="row g-3">
            {% csrf_token %}
            <div class="col-md-8">
                <input type="email" name="email" class="form-control form-control-lg" placeholder="Enter your email" required>
            </div>
            <div class="col-md-4 d-grid">
                <button type="submit" class="btn btn-success btn-lg">Subscribe</button>
            </div>
        </form>
    </section>
</div>
{% endblock %}
